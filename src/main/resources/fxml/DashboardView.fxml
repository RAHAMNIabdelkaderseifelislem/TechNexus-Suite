<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.TilePane?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.text.Font?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.yourstore.app.frontend.controller.DashboardViewController"
      spacing="20.0" alignment="TOP_CENTER" styleClass="main-content-area">

    <Label text="Store Dashboard" styleClass="h1">
        <VBox.margin><Insets bottom="25.0" top="5.0"/></VBox.margin>
    </Label>

    <TilePane fx:id="metricsTilePane" orientation="HORIZONTAL" prefColumns="3" 
              hgap="25.0" vgap="25.0" alignment="CENTER">
        <padding><Insets bottom="20.0"/></padding>
        
        <!-- Card 1: Total Products -->
        <VBox fx:id="totalProductsCard" styleClass="dashboard-card" prefWidth="280" minHeight="120"> <!-- Added fx:id -->
            <Label text="TOTAL PRODUCTS" styleClass="metric-title"/>
            <Label fx:id="totalProductsLabel" text="Loading..." styleClass="metric-value"/>
        </VBox>

        <!-- Card 2: Total Sales Count -->
        <VBox fx:id="totalSalesCountCard" styleClass="dashboard-card" prefWidth="280" minHeight="120"> <!-- Added fx:id -->
            <Label text="TOTAL SALES COUNT" styleClass="metric-title"/>
            <Label fx:id="totalSalesCountLabel" text="Loading..." styleClass="metric-value"/>
        </VBox>

        <!-- Card 3: Total Sales Revenue -->
        <VBox fx:id="totalRevenueCard" styleClass="dashboard-card" prefWidth="280" minHeight="120"> <!-- ONLY base styleClass here. Conditional ones in controller. Added fx:id -->
            <Label text="TOTAL SALES REVENUE" styleClass="metric-title"/>
            <Label fx:id="totalRevenueLabel" text="Loading..." styleClass="metric-value"/>
        </VBox>
        
        <!-- Card 4: Pending Repairs Card -->
        <VBox fx:id="pendingRepairsCard" styleClass="dashboard-card" prefWidth="280" minHeight="120"> <!-- ONLY base styleClass here. Conditional ones in controller. Added fx:id -->
            <Label text="PENDING REPAIRS" styleClass="metric-title"/>
            <Label fx:id="pendingRepairsLabel" text="Loading..." styleClass="metric-value"/>
        </VBox>

    </TilePane>
    
    <Button fx:id="refreshButton" text="Refresh Metrics" onAction="#loadDashboardMetrics" styleClass="button-secondary">
        <VBox.margin><Insets bottom="25.0"/></VBox.margin>
    </Button>

    <BarChart fx:id="salesByCategoryChart" title="Sales Count by Product Category" prefHeight="350.0" VBox.vgrow="ALWAYS" animated="true">
        <xAxis><CategoryAxis fx:id="categoryAxis" label="Product Category" tickLabelGap="5"/></xAxis>
        <yAxis><NumberAxis fx:id="salesCountAxis" label="Number of Sales" side="LEFT" minorTickVisible="false"/></yAxis>
    </BarChart>
</VBox>